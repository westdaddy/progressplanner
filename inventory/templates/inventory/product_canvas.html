{% extends "inventory/base.html" %}
{% load static %}

{% block title %}Product Canvas{% endblock %}

{% block content %}
<style>
  main .container {
    max-width: none;
    width: 100%;
    padding: 0;
  }

  body, html {
    overflow: hidden;
  }

  #product-canvas-wrapper {
    width: 100vw;
    margin-left: calc(50% - 50vw);
    background: #ffffff;
    position: relative;
  }

  #product-canvas {
    display: block;
    width: 100%;
    height: 100%;
  }

  #product-canvas-toolbar {
    position: absolute;
    top: 16px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 8px;
    padding: 8px 12px;
    background: rgba(33, 33, 33, 0.82);
    border-radius: 999px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
    z-index: 10;
  }

  #product-canvas-toolbar button {
    appearance: none;
    border: none;
    background: rgba(255, 255, 255, 0.9);
    color: #212121;
    font-size: 0.9rem;
    font-weight: 600;
    border-radius: 999px;
    padding: 6px 14px;
    cursor: pointer;
    transition: background-color 120ms ease, color 120ms ease;
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.08);
  }

  #product-canvas-toolbar button:hover,
  #product-canvas-toolbar button:focus-visible {
    background: #f5f5f5;
    color: #111111;
    outline: none;
  }

  #product-canvas-toolbar button.is-active {
    background: #4285f4;
    color: #ffffff;
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.5);
  }
</style>
<div id="product-canvas-wrapper"
     data-products='{{ product_canvas_json|default:"[]"|safe }}'
     data-config='{{ product_canvas_config|default:"{}"|safe }}'
     data-layout-url="{% url 'product_canvas_layout' %}">
  <div id="product-canvas-toolbar" role="toolbar" aria-label="Canvas tools">
    <button type="button" data-tool="text">Add text</button>
    <button type="button" data-tool="highlight">Add highlight</button>
    <button type="button" data-tool="line">Draw line</button>
  </div>
  <canvas id="product-canvas"></canvas>
</div>
{% endblock %}

{% block extrajs %}
  {{ block.super }}
  <script src="https://cdn.jsdelivr.net/npm/fabric@5.3.0/dist/fabric.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="{% static 'product-canvas.js' %}"></script>
{% endblock %}
